const a19_0x244050=a19_0x1d73;function a19_0x14e4(){const _0x3e06fc=['gxfQG','bstackAccesskey','Grid\x20stoppped.','bstackUsername','readFileSync','1522408kJRCuF','options','JxTAi','handler','statusCode','Browserstack','21241gYXhDx','PsNFy','username','PHJHY','rtSPW','wlJbS','message','connectionTimeout','error','../../config/constants','KnwCi','WebSocket','user','fetchLocalCreds','BmONe','unauthorised','type','bCfqQ','INFO','exit','958753edSKke','clusterRegion','KuSCU','builder','epilogue','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','7PoFIYy','desc','cloudProvider','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','argv','3121176jbleFb','ERROR','../../utils/instrumentationUtils','4644AUvBaN','llnKA','YZCWW','<PasswordPlaceholder>','command','../../utils/gridComponents','../../utils/createk8sClient','eRKgE','../../utils/utilityMethods','name','help','region','../../cloudproviders/utils','password','reconnecting-websocket','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','aTJoo','DQBrs','usage','180xUwDPI','stringify','32mHEiYG','debug','clusterName','gridId','configureIfNotConfigured','grid','addListeners','FtaSy','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','string','info','Stopping\x20grid\x20','111402RTVXuw','eUyVo','../../utils/webSocketUtils','5AOXDPD','description','187230BXuAWe','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Stop\x20a\x20running\x20Automation\x20grid.','init-not-called','stack','replace','parse','4419864gLbzIu','stop'];a19_0x14e4=function(){return _0x3e06fc;};return a19_0x14e4();}(function(_0x465bf6,_0x4ae3b5){const _0x991ae4=a19_0x1d73,_0xdfd9ec=_0x465bf6();while(!![]){try{const _0x4c015d=parseInt(_0x991ae4(0x16a))/0x1+parseInt(_0x991ae4(0x131))/0x2*(-parseInt(_0x991ae4(0x142))/0x3)+parseInt(_0x991ae4(0x175))/0x4*(parseInt(_0x991ae4(0x140))/0x5)+-parseInt(_0x991ae4(0x149))/0x6+parseInt(_0x991ae4(0x170))/0x7*(parseInt(_0x991ae4(0x150))/0x8)+-parseInt(_0x991ae4(0x13d))/0x9*(parseInt(_0x991ae4(0x12f))/0xa)+-parseInt(_0x991ae4(0x156))/0xb*(-parseInt(_0x991ae4(0x11c))/0xc);if(_0x4c015d===_0x4ae3b5)break;else _0xdfd9ec['push'](_0xdfd9ec['shift']());}catch(_0x58e40a){_0xdfd9ec['push'](_0xdfd9ec['shift']());}}}(a19_0x14e4,0xaf72d));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x244050(0x12a)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x244050(0x15f)),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x244050(0x124)),{scaleDownHubDeployment}=require(a19_0x244050(0x121)),{sendInstrumentationEvent}=require(a19_0x244050(0x11b)),webSocketUtils=require(a19_0x244050(0x13f)),{createK8sClient}=require(a19_0x244050(0x122)),{getCloudProviderObject}=require(a19_0x244050(0x128));function a19_0x1d73(_0x3fd648,_0x3dd49c){const _0x14e4d5=a19_0x14e4();return a19_0x1d73=function(_0x1d736c,_0x24ed68){_0x1d736c=_0x1d736c-0x11b;let _0x1a64b5=_0x14e4d5[_0x1d736c];return _0x1a64b5;},a19_0x1d73(_0x3fd648,_0x3dd49c);}exports[a19_0x244050(0x120)]=a19_0x244050(0x136),exports[a19_0x244050(0x171)]=a19_0x244050(0x144),exports[a19_0x244050(0x16d)]=function(_0x259a98){const _0x48b88b=a19_0x244050,_0x4c93e8={};_0x4c93e8[_0x48b88b(0x11e)]=_0x48b88b(0x12b),_0x4c93e8[_0x48b88b(0x11d)]=_0x48b88b(0x13a),_0x4c93e8[_0x48b88b(0x157)]=_0x48b88b(0x126);const _0x40132e=_0x4c93e8,_0x498c73={};_0x498c73[_0x48b88b(0x141)]=_0x40132e['YZCWW'],_0x498c73[_0x48b88b(0x166)]=_0x40132e['llnKA'];const _0x523fef={};return _0x523fef['grid-id']=_0x498c73,_0x259a98[_0x48b88b(0x12e)](HELP_HEADER_MESSAGE[_0x48b88b(0x14a)])[_0x48b88b(0x16e)](HELP_FOOTER_MESSAGE)[_0x48b88b(0x151)](_0x523fef)[_0x48b88b(0x126)](_0x40132e[_0x48b88b(0x157)])[_0x48b88b(0x174)];},exports[a19_0x244050(0x153)]=async function(_0x3a6ca0){const _0x16a80d=a19_0x244050,_0x1d323d={'TyWXE':_0x16a80d(0x16f),'mNGsX':function(_0x36508c){return _0x36508c();},'gxfQG':_0x16a80d(0x139),'KnwCi':function(_0x189c96,_0x48eab5,_0x4ff2ba,_0x340311,_0x377b06,_0x381ee7,_0x29cd38){return _0x189c96(_0x48eab5,_0x4ff2ba,_0x340311,_0x377b06,_0x381ee7,_0x29cd38);},'aTJoo':'stop-grid-called','DQBrs':_0x16a80d(0x145),'mbpof':function(_0x50969c,_0x49e0c8,_0x231946,_0x34ea47,_0x1de354,_0x4a6e8f,_0x3bb078){return _0x50969c(_0x49e0c8,_0x231946,_0x34ea47,_0x1de354,_0x4a6e8f,_0x3bb078);},'eRKgE':'<UsernamePlaceholder>','FtaSy':_0x16a80d(0x11f),'jBkuX':'Adding\x20Websocket\x20listeners','rtSPW':function(_0x2ea542,_0x540fae,_0x5cb9e4,_0x148ad8){return _0x2ea542(_0x540fae,_0x5cb9e4,_0x148ad8);},'cKmmO':function(_0x3b3e66,_0x32c1ea,_0x1912bf,_0x274d36,_0x338a67,_0x46052e){return _0x3b3e66(_0x32c1ea,_0x1912bf,_0x274d36,_0x338a67,_0x46052e);},'bCfqQ':function(_0x45a207,_0x3bbef0){return _0x45a207(_0x3bbef0);},'KuSCU':function(_0x32ee48,_0x42c38b,_0x492bff){return _0x32ee48(_0x42c38b,_0x492bff);},'eUyVo':_0x16a80d(0x14d),'BmONe':function(_0x9e570a,_0x4cf303){return _0x9e570a===_0x4cf303;},'JxTAi':function(_0x1aa72a,_0x123c5c,_0x5acdfc,_0x11ad99,_0x5f51de,_0xeea0e6,_0x13ae6e){return _0x1aa72a(_0x123c5c,_0x5acdfc,_0x11ad99,_0x5f51de,_0xeea0e6,_0x13ae6e);},'wlJbS':_0x16a80d(0x165),'PHJHY':function(_0x25dbd6,_0x21f215,_0x28a559,_0x14bdbe,_0x27299c,_0x23fd72,_0xe0e8){return _0x25dbd6(_0x21f215,_0x28a559,_0x14bdbe,_0x27299c,_0x23fd72,_0xe0e8);},'hZBag':'invalid-grid-id','NGUiH':function(_0x33c10f,_0x1e6ec3,_0x19387e,_0x6bf4c9,_0x591740,_0x384cac,_0x2423e0){return _0x33c10f(_0x1e6ec3,_0x19387e,_0x6bf4c9,_0x591740,_0x384cac,_0x2423e0);},'lbAvo':'server-error'};let _0x23c9ff;try{!_0x3a6ca0[_0x16a80d(0x134)]&&(logger['error'](_0x1d323d['TyWXE']),process[_0x16a80d(0x169)](0x1));!fs['existsSync'](_0x1d323d['mNGsX'](getCredentialsPath))&&(logger['error'](_0x1d323d[_0x16a80d(0x14b)]),await _0x1d323d[_0x16a80d(0x160)](sendInstrumentationEvent,_0x3a6ca0,_0x1d323d[_0x16a80d(0x12c)],messageTypes['ERROR'],_0x1d323d[_0x16a80d(0x12d)],null,_0x3a6ca0),process[_0x16a80d(0x169)](0x1));logger[_0x16a80d(0x13b)](_0x16a80d(0x13c)+_0x3a6ca0['gridId']),await _0x1d323d['mbpof'](sendInstrumentationEvent,_0x3a6ca0,_0x1d323d[_0x16a80d(0x12c)],messageTypes[_0x16a80d(0x168)],null,null,_0x3a6ca0);const _0x491fa9=JSON[_0x16a80d(0x148)](fs[_0x16a80d(0x14f)](_0x1d323d['mNGsX'](getCredentialsPath)));global_registry[_0x16a80d(0x14e)]=_0x491fa9[_0x16a80d(0x155)][_0x16a80d(0x158)],global_registry[_0x16a80d(0x14c)]=_0x491fa9[_0x16a80d(0x155)][_0x16a80d(0x129)];const _0x28ff63=WS_ENDPOINT[_0x16a80d(0x147)](_0x1d323d[_0x16a80d(0x123)],_0x491fa9['Browserstack']['username'])[_0x16a80d(0x147)](_0x1d323d[_0x16a80d(0x138)],_0x491fa9[_0x16a80d(0x155)][_0x16a80d(0x129)]),_0xa23272={};_0xa23272[_0x16a80d(0x161)]=ws,_0xa23272[_0x16a80d(0x15d)]=0x36ee80,_0x23c9ff=new ReconnectingWebSocket(_0x28ff63,[],_0xa23272),logger[_0x16a80d(0x132)](_0x1d323d['jBkuX']),webSocketUtils[_0x16a80d(0x137)](_0x23c9ff,_0x3a6ca0[_0x16a80d(0x162)],_0x3a6ca0[_0x16a80d(0x129)]);const [_0x494f46,_0x581d64]=await _0x1d323d[_0x16a80d(0x15a)](getGridDetails,_0x491fa9['Browserstack']['username'],_0x491fa9[_0x16a80d(0x155)][_0x16a80d(0x129)],_0x3a6ca0[_0x16a80d(0x134)]);if(_0x581d64){const _0xbc21f3=_0x581d64['info'];global_registry[_0x16a80d(0x172)]=_0xbc21f3['cloudProvider'],global_registry[_0x16a80d(0x16b)]=_0xbc21f3[_0x16a80d(0x127)],global_registry[_0x16a80d(0x133)]=_0xbc21f3['clusterName'];const _0x277bf0=_0x1d323d['cKmmO'](getCloudProviderObject,_0xbc21f3[_0x16a80d(0x172)],_0xbc21f3['clusterName'],_0xbc21f3[_0x16a80d(0x125)],_0x23c9ff,webSocketUtils),_0x90dd79=_0x491fa9[_0x16a80d(0x172)]||{};await _0x277bf0[_0x16a80d(0x163)](_0x90dd79),_0x277bf0[_0x16a80d(0x135)]();const [_0x4e88ff,_0x45c82e,_0x3f5083,_0x58def6,_0x39903c,_0x1ac2f2]=await _0x1d323d[_0x16a80d(0x167)](createK8sClient,_0x277bf0);await _0x1d323d[_0x16a80d(0x16c)](scaleDownHubDeployment,_0x45c82e,_0xbc21f3[_0x16a80d(0x125)]),logger[_0x16a80d(0x13b)](_0x1d323d[_0x16a80d(0x13e)]),process[_0x16a80d(0x169)](0x0);}_0x1d323d[_0x16a80d(0x164)](_0x494f46[_0x16a80d(0x154)],0x191)&&(logger[_0x16a80d(0x15e)](_0x16a80d(0x143)),await _0x1d323d[_0x16a80d(0x152)](sendInstrumentationEvent,_0x3a6ca0,_0x1d323d[_0x16a80d(0x12c)],messageTypes['ERROR'],_0x1d323d[_0x16a80d(0x15b)],null,_0x3a6ca0),process['exit'](0x1)),_0x1d323d[_0x16a80d(0x164)](_0x494f46[_0x16a80d(0x154)],0x190)&&(logger[_0x16a80d(0x15e)](JSON['parse'](_0x494f46['body'])[_0x16a80d(0x15c)]),await _0x1d323d[_0x16a80d(0x159)](sendInstrumentationEvent,_0x3a6ca0,_0x1d323d[_0x16a80d(0x12c)],messageTypes[_0x16a80d(0x176)],_0x1d323d['hZBag'],null,_0x3a6ca0),process[_0x16a80d(0x169)](0x1)),logger[_0x16a80d(0x15e)](_0x16a80d(0x173)+JSON[_0x16a80d(0x130)](_0x494f46)),await _0x1d323d['NGUiH'](sendInstrumentationEvent,_0x3a6ca0,_0x1d323d[_0x16a80d(0x12c)],messageTypes[_0x16a80d(0x176)],_0x1d323d['lbAvo'],_0x494f46,_0x3a6ca0),process[_0x16a80d(0x169)](0x1);}catch(_0x1d1a13){const _0x239a65='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x1d1a13+'\x20\x0a'+JSON[_0x16a80d(0x130)](_0x1d1a13[_0x16a80d(0x146)])+'\x20';logger['error'](_0x239a65),process['exit'](0x1);}};