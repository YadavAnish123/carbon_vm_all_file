const a24_0x1dd886=a24_0x1bb2;(function(_0x43fe4f,_0xa8020f){const _0x1c707b=a24_0x1bb2,_0x3fa0d0=_0x43fe4f();while(!![]){try{const _0x2d8cf3=-parseInt(_0x1c707b(0x160))/0x1*(parseInt(_0x1c707b(0x155))/0x2)+-parseInt(_0x1c707b(0x151))/0x3+-parseInt(_0x1c707b(0x16f))/0x4+-parseInt(_0x1c707b(0x168))/0x5+parseInt(_0x1c707b(0x150))/0x6+-parseInt(_0x1c707b(0x174))/0x7*(-parseInt(_0x1c707b(0x179))/0x8)+parseInt(_0x1c707b(0x167))/0x9*(parseInt(_0x1c707b(0x158))/0xa);if(_0x2d8cf3===_0xa8020f)break;else _0x3fa0d0['push'](_0x3fa0d0['shift']());}catch(_0x1039f2){_0x3fa0d0['push'](_0x3fa0d0['shift']());}}}(a24_0x4256,0x7ebc5));function a24_0x1bb2(_0x566752,_0x46acbb){const _0x42567=a24_0x4256();return a24_0x1bb2=function(_0x1bb23a,_0x413000){_0x1bb23a=_0x1bb23a-0x14c;let _0x4a9d8d=_0x42567[_0x1bb23a];return _0x4a9d8d;},a24_0x1bb2(_0x566752,_0x46acbb);}function a24_0x4256(){const _0x16db68=['451536iWokrx','1413957NpqrLZ','path','TemplateBody','js-yaml','314qfCOub','join','StackName','18192140hGVvPk','Properties','EFaUD','apiVersion','UlIzB','toString','QUKZi','browserstack:cluster','191WJIaNo','../config/constants','Resources','CAPABILITY_NAMED_IAM','NVmTD','2010-05-15','Key','9IjnGQU','4755480dsiOGZ','stringify','DELETE','kWPOe','stackCreateComplete','ghMgN','UtgiP','3163292Tvqebv','browserstack:creationDate','readFileAsync','OnFailure','../config/logger','1012508SOThmo','yHEdZ','CloudFormation','load','js-yaml-cloudformation-schema','48UGzrYs','createStack','Value','bluebird','schema','push','Tags','promise','./AWSUtils','lTEnH'];a24_0x4256=function(){return _0x16db68;};return a24_0x4256();}const fs=require('fs'),path=require(a24_0x1dd886(0x152)),yaml=require(a24_0x1dd886(0x154)),{CLOUDFORMATION_SCHEMA}=require(a24_0x1dd886(0x178)),Promise=require(a24_0x1dd886(0x17c)),AWS=require(a24_0x1dd886(0x14e))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a24_0x1dd886(0x161)),{logger}=require(a24_0x1dd886(0x173));Promise['promisifyAll'](fs),addAutoscalerTags=async(_0x11a6dc,_0x1958a5,_0x10e584)=>{const _0x366d27=a24_0x1dd886;for(let _0x2274cb in _0x11a6dc['Resources']){_0x11a6dc['Resources'][_0x2274cb][_0x366d27(0x159)]&&_0x11a6dc[_0x366d27(0x162)][_0x2274cb][_0x366d27(0x159)][_0x366d27(0x14c)]&&_0x11a6dc[_0x366d27(0x162)][_0x2274cb][_0x366d27(0x159)][_0x366d27(0x14c)][_0x366d27(0x17e)](..._0x10e584);}},exports['createAutoscalerStack']=async _0xd70103=>{const _0x4178c5=a24_0x1dd886,_0x513241={'kWPOe':_0x4178c5(0x15f),'fSwel':_0x4178c5(0x170),'NVmTD':_0x4178c5(0x165),'yHEdZ':'templates','lTEnH':'autoscaler-role-creation.yaml','UlIzB':'utf-8','HZcwl':function(_0xf54bfe,_0x122d3a,_0x54c0d5,_0x27d665){return _0xf54bfe(_0x122d3a,_0x54c0d5,_0x27d665);},'QUKZi':_0x4178c5(0x16a),'EFaUD':'ClusterName','UtgiP':_0x4178c5(0x163),'ghMgN':_0x4178c5(0x16c)},_0x3b39ef=COMMON_HST_TAGS,_0x56c6be={};_0x56c6be[_0x4178c5(0x166)]=_0x513241[_0x4178c5(0x16b)],_0x56c6be[_0x4178c5(0x17b)]=_0xd70103,_0x3b39ef['push'](_0x56c6be),_0x3b39ef[_0x4178c5(0x17e)]({'Key':_0x513241['fSwel'],'Value':new Date()['valueOf']()[_0x4178c5(0x15d)]()});const _0x1b9bfe={};_0x1b9bfe[_0x4178c5(0x15b)]=_0x513241[_0x4178c5(0x164)];const _0x65d05a=new AWS[(_0x4178c5(0x176))](_0x1b9bfe),_0x121b3f=await fs[_0x4178c5(0x171)](path[_0x4178c5(0x156)](__dirname,'..',_0x513241[_0x4178c5(0x175)],_0x513241[_0x4178c5(0x14f)]),_0x513241[_0x4178c5(0x15c)]),_0x41e5a9={};_0x41e5a9[_0x4178c5(0x17d)]=CLOUDFORMATION_SCHEMA;const _0x369ebb=yaml[_0x4178c5(0x177)](_0x121b3f,_0x41e5a9);_0x513241['HZcwl'](addAutoscalerTags,_0x369ebb,_0xd70103,_0x3b39ef);const _0x5a4af1=JSON[_0x4178c5(0x169)](_0x369ebb),_0x30b4cc={};_0x30b4cc['StackName']=CLUSTER_AUTOSCALER_STACK_NAME,_0x30b4cc[_0x4178c5(0x172)]=_0x513241[_0x4178c5(0x15e)],_0x30b4cc[_0x4178c5(0x153)]=_0x5a4af1,_0x30b4cc['Parameters']=[{'ParameterKey':_0x513241[_0x4178c5(0x15a)],'ParameterValue':_0xd70103}],_0x30b4cc['Capabilities']=[_0x513241[_0x4178c5(0x16e)]],_0x30b4cc[_0x4178c5(0x14c)]=_0x3b39ef;const _0xd62c49=_0x30b4cc,_0x231abc=await _0x65d05a[_0x4178c5(0x17a)](_0xd62c49)['promise']();logger['debug']('Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete');const _0x50c429={};return _0x50c429[_0x4178c5(0x157)]=_0x231abc['StackId'],_0x65d05a['waitFor'](_0x513241[_0x4178c5(0x16d)],_0x50c429)[_0x4178c5(0x14d)]();};